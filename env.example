# Tiger ID - Environment Configuration Template
# Copy this file to .env and update with your values

# ============================================
# MODAL CONFIGURATION (Required for ML Models)
# ============================================
# Modal provides serverless GPU compute for all ML models
# Deploy: npm run deploy:modal
# Dashboard: https://modal.com/apps
MODAL_ENABLED=true
MODAL_MAX_RETRIES=3
MODAL_RETRY_DELAY=1.0
MODAL_TIMEOUT=120
MODAL_QUEUE_MAX_SIZE=100
MODAL_FALLBACK_TO_QUEUE=true

# ============================================
# APPLICATION CONFIGURATION (Required)
# ============================================
APP_ENV=development
DEBUG=false

# Generate secure keys:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-this-to-a-secure-random-key
JWT_SECRET_KEY=change-this-to-another-secure-random-key
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ============================================
# DATABASE CONFIGURATION
# ============================================
# SQLite (Default - Recommended for Development)
SQLITE_DB_PATH=data/production.db
USE_SQLITE_DEMO=false
USE_POSTGRESQL=false

# PostgreSQL (Optional - For Production)
# DATABASE_URL=postgresql://user:password@localhost:5432/tiger_investigation
# USE_POSTGRESQL=true
# DB_POOL_SIZE=10
# DB_MAX_OVERFLOW=20

# ============================================
# REDIS & CELERY (Optional)
# ============================================
# Required only if using background tasks
# REDIS_URL=redis://localhost:6379/0
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ============================================
# MODEL CONFIGURATION
# ============================================
# Note: All models now run on Modal - no local model files needed!
MODEL_DEVICE=cuda
MODEL_PRELOAD_ON_STARTUP=false
BATCH_SIZE=32
MODEL_CACHE_TTL=3600

# Model paths (legacy - kept for compatibility, not used with Modal)
MEGADETECTOR_MODEL_PATH=./data/models/md_v5a.0.0.pt
REID_MODEL_PATH=./data/models/tiger_reid_model.pth
RAPID_MODEL_PATH=./data/models/rapid/checkpoints/model.pth
WILDLIFETOOLS_MODEL_PATH=./data/models/wildlife-tools/
CVWC2019_MODEL_PATH=./data/models/cvwc2019/checkpoints/model.pth

# ============================================
# DATASET PATHS
# ============================================
# Datasets are stored locally for efficiency
ATRW_DATASET_PATH=./data/models/atrw/
METAWILD_DATASET_PATH=./data/datasets/metawild/
WILDLIFE_DATASETS_PATH=./data/datasets/wildlife-datasets/
INDIVIDUAL_ANIMAL_REID_PATH=./data/datasets/individual-animal-reid/
TPC_FACILITIES_EXCEL_PATH=./data/datasets/2025_10_31 TPC_Tigers non-accredited facilities.xlsx

# Ingest datasets on startup (SQLite only)
INGEST_DATASETS_ON_STARTUP=true

# ============================================
# STORAGE CONFIGURATION
# ============================================
STORAGE_TYPE=local
STORAGE_PATH=./data/storage

# S3 Storage (Optional - for production deployments)
# STORAGE_TYPE=s3
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key

# ============================================
# WEB SEARCH CONFIGURATION (Optional)
# ============================================
# Configure web search provider for investigations
WEB_SEARCH_PROVIDER=firecrawl

# Serper API (Google Search API) - Recommended for production
# Get key: https://serper.dev/
# SERPER_API_KEY=your-serper-api-key

# Tavily API (AI-powered search)
# Get key: https://tavily.com/
# TAVILY_API_KEY=your-tavily-api-key

# Perplexity API (AI search and answers)
# Get key: https://www.perplexity.ai/
# PERPLEXITY_API_KEY=your-perplexity-api-key

# ============================================
# EXTERNAL APIs (All Optional)
# ============================================
# These are optional integrations - system works without them

# Firecrawl API (Web Crawling & Search)
# Get key: https://firecrawl.dev/
# FIRECRAWL_API_KEY=your-firecrawl-api-key
# FIRECRAWL_SEARCH_ENABLED=true

# YouTube API (Social Media Monitoring)
# Get key: https://console.cloud.google.com/apis/credentials
# YOUTUBE_API_KEY=your-youtube-api-key
# YOUTUBE_ENABLED=false

# Meta/Facebook API (Social Media Monitoring)
# Get key: https://developers.facebook.com/apps/
# META_ACCESS_TOKEN=your-meta-access-token
# META_APP_ID=your-app-id
# META_APP_SECRET=your-app-secret
# META_ENABLED=false

# USDA API (Regulatory Data)
# USDA_API_KEY=your-usda-api-key
# USDA_ENABLED=false

# CITES API (Wildlife Trade Database)
# CITES_API_KEY=your-cites-api-key
# CITES_ENABLED=false

# USFWS API (US Fish & Wildlife Service)
# USFWS_API_KEY=your-usfws-api-key
# USFWS_ENABLED=false

# ============================================
# AI & ML APIS (Optional)
# ============================================
# OmniVinci API (Multimodal AI)
# Get key: https://build.nvidia.com/
# OMNIVINCI_API_KEY=your-omnivinci-api-key
# OMNIVINCI_USE_LOCAL=false
# OMNIVINCI_MODEL_PATH=./data/models/omnivinci/omnivinci
# OMNIVINCI_TORCH_DTYPE=torch.float16
# OMNIVINCI_DEVICE_MAP=auto
# OMNIVINCI_NUM_VIDEO_FRAMES=128
# OMNIVINCI_LOAD_AUDIO=true
# OMNIVINCI_AUDIO_LENGTH=max_3600

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
MFA_ENABLED=false
PASSWORD_MIN_LENGTH=8

# CSRF Protection
ENABLE_CSRF=false
# CSRF_SECRET_KEY=change-this-to-a-secure-random-key
CSRF_TOKEN_LIFETIME=3600

# ============================================
# BROWSER AUTOMATION (Optional)
# ============================================
# Puppeteer for web scraping
PUPPETEER_ENABLED=false
# PUPPETEER_HEADLESS=true
# PUPPETEER_TIMEOUT=30000
# PUPPETEER_VIEWPORT_WIDTH=1280
# PUPPETEER_VIEWPORT_HEIGHT=720
# PUPPETEER_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# ============================================
# MONITORING & LOGGING
# ============================================
LOG_LEVEL=INFO

# Sentry Error Tracking (Optional - for production error monitoring)
# Get key: https://sentry.io/
# SENTRY_DSN=your-sentry-dsn
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=0.1
# SENTRY_PROFILES_SAMPLE_RATE=0.1

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# For notification emails
EMAIL_ENABLED=false
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=your-email@gmail.com
# SMTP_FROM_NAME=Tiger ID

# ============================================
# LANGGRAPH (Optional)
# ============================================
USE_LANGGRAPH=false

# ============================================
# FRONTEND CONFIGURATION
# ============================================
FRONTEND_URL=http://localhost:5173

# ============================================
# AUTO-INVESTIGATION (Optional)
# ============================================
AUTO_INVESTIGATION_ENABLED=false
AUTO_INVESTIGATION_MIN_CONFIDENCE=0.8

# ============================================
# ADVANCED MODEL CONFIGURATION (Optional)
# ============================================
# Enable specific RE-ID models (all run on Modal)
# RAPID_ENABLED=false
# WILDLIFETOOLS_ENABLED=false
# WILDLIFETOOLS_MODEL_TYPE=megadescriptor
# CVWC2019_ENABLED=false
# MEGADETECTOR_VERSION=v5
# MEGADETECTOR_CONFIDENCE_THRESHOLD=0.5

# ============================================
# SQLITE CONFIGURATION
# ============================================
# SQLite-specific settings
SQLITE_DB_PATH=data/production.db
USE_SQLITE_DEMO=false

# ============================================
# NOTES & QUICK START
# ============================================
# Getting Started:
# 1. Copy this file to .env and update values
# 2. Generate secure keys: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 3. Deploy Modal: npm run deploy:modal
# 4. Start app: npm start
# 5. Access: http://localhost:5173 (frontend) and http://localhost:8000 (API)
#
# Key Features:
# - All ML models run on Modal (no local GPU needed!)
# - Datasets stored locally for efficiency
# - External APIs are optional (system works without them)
# - SQLite for development, PostgreSQL for production
#
# Quick Commands:
# - npm start              → Start everything
# - npm run deploy:modal   → Deploy ML models to Modal
# - npm run modal:status   → Check Modal deployment
# - npm run modal:logs     → View Modal logs
#
# Documentation:
# - Setup Guide: docs/LOCAL_SETUP.md
# - Modal Guide: docs/MODAL_SETUP_GUIDE.md
# - API Docs: http://localhost:8000/docs (when running)

